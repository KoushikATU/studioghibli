{"version":3,"sources":["service/AuthService.js","Home.js","Register.js","Login.js","PremiumContent.js","routes/PublicRoute.js","routes/PrivateRoute.js","App.js","index.js"],"names":["module","exports","getUser","user","sessionStorage","getItem","JSON","parse","getToken","setUserSession","token","setItem","stringify","resetUserSession","removeItem","Home","_jsx","children","Register","_useState","useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","username","setUsername","_useState7","_useState8","password","setPassword","_useState9","_useState10","message","setMessage","_jsxs","onSubmit","event","preventDefault","trim","requestBody","axios","post","headers","then","response","catch","error","status","data","type","value","onChange","target","className","Login","props","errorMessage","setErrorMessage","history","push","PremiumContent","onClick","PublicRoute","_ref","Component","component","rest","_objectWithoutProperties","_excluded","Route","_objectSpread","render","Redirect","to","pathname","PrivateRoute","verifyTokenAPIURL","App","isAuthenicating","setAuthenicating","useEffect","undefined","BrowserRouter","NavLink","exact","activeClassName","Switch","path","ReactDOM","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7d5b8f78.chunk.js","sourcesContent":["module.exports = {\n  getUser: function() {\n    const user = sessionStorage.getItem('user');\n    if (user === 'undefined' || !user) {\n      return null;\n    } else {\n      return JSON.parse(user);\n    }\n  },\n\n  getToken: function() {\n    return sessionStorage.getItem('token');\n  },\n\n  setUserSession: function(user, token) {\n    sessionStorage.setItem('user', JSON.stringify(user));\n    sessionStorage.setItem('token', token);\n  },\n\n  resetUserSession: function() {\n    sessionStorage.removeItem('user');\n    sessionStorage.removeItem('token');\n  }\n}","import React from 'react';\n\nconst Home = () => {\n  return (\n    <div>\n      This is the home page!\n    </div>\n  )\n}\n\nexport default Home;","import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst registerUrl = 'https://lxfsrxntnf.execute-api.us-east-1.amazonaws.com/prod/register';\n\nconst Register = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState(null);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (username.trim() === '' || email.trim() === '' || name.trim() === '' || password.trim() === '') {\n      setMessage('All fields are required');\n      return;\n    }\n    setMessage(null);\n    \n    const requestBody = {\n      username: username,\n      email: email,\n      name: name,\n      password: password\n    }\n\n    const requestConfig = {\n      headers: {\n        'x-api-key': 'mzW9uosG9F1ZZ3uXEo9Vn5Yxxc9tTTo08UwzVecx'\n      }\n    }\n    axios.post(registerUrl, requestBody,requestConfig).then(response => {\n      setMessage('Registeration Successful');\n    }).catch(error => {\n      if (error.response.status === 401) {\n        setMessage(error.response.data.message);\n      } else {\n        setMessage('sorry....the backend server is down!! please try again later');\n      }\n    })\n  }\n\n  return (\n    <div>\n      <form onSubmit={submitHandler}>\n        <h5>Register</h5>\n        name: <input type=\"text\" value={name} onChange={event => setName(event.target.value)} /> <br/>\n        email: <input type=\"text\" value={email} onChange={event => setEmail(event.target.value)} /> <br/>\n        username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br/>\n        password: <input type=\"text\" value={password} onChange={event => setPassword(event.target.value)} /> <br/>\n        <input type=\"submit\" value=\"Register\" />\n      </form>\n      {message && <p className=\"message\">{message}</p>}\n    </div>\n  )\n}\n\nexport default Register;","import React, {useState} from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './service/AuthService'\nconst loginAPIUrl = 'https://lxfsrxntnf.execute-api.us-east-1.amazonaws.com/prod/login';\n\nconst Login = (props) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (username.trim() === '' || password.trim() === '') {\n      setErrorMessage('Both username and password are required');\n      return;\n    }\n    setErrorMessage(null);\n   \n    const requestBody = {\n      username: username,\n      password: password\n    }\n\n    const requestConfig = {\n      headers: {\n        'x-api-key': 'mzW9uosG9F1ZZ3uXEo9Vn5Yxxc9tTTo08UwzVecx'\n      }\n    }\n\n    axios.post(loginAPIUrl, requestBody, requestConfig).then((response) => {\n      setUserSession(response.data.user, response.data.token);\n      props.history.push('/premium-content');\n    }).catch((error) => {\n      if (error.response.status === 401 || error.response.status === 403) {\n        setErrorMessage(error.response.data.message);\n      } else {\n        setErrorMessage('sorry....the backend server is down. please try again later!!');\n      }\n    })\n  }\n\n  return (\n    <div>\n      <form onSubmit={submitHandler}>\n        <h5>Login</h5>\n        username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br/>\n        password: <input type=\"password\" value={password} onChange={event => setPassword(event.target.value)} /> <br/>\n        <input type=\"submit\" value=\"Login\" />\n      </form>\n      {errorMessage && <p className=\"message\">{errorMessage}</p>}\n    </div>\n  )\n}\n\nexport default Login;","import React from 'react';\nimport { getUser, resetUserSession } from './service/AuthService';\n\nconst PremiumContent = (props) => {\n  const user = getUser();\n  const name = user !== 'undefined' && user ? user.name : '';\n\n  const logoutHandler = () => {\n    resetUserSession();\n    props.history.push('login');\n  }\n  return (\n    <div>\n      Hello {name}! You have been loggined in!!!! Welcome to the premium content. <br />\n      <input type=\"button\" value=\"Logout\" onClick={logoutHandler} />\n    </div>\n  )\n}\n\nexport default PremiumContent;","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { getToken } from '../service/AuthService';\n\nconst PublicRoute = ({ component: Component, ...rest}) => {\n  return (\n    <Route \n      {...rest}\n      render={props => {\n        return !getToken() ? <Component {...props} />\n        : <Redirect to={{ pathname: '/premium-content'}} />\n      }}\n    />\n  )\n}\n\nexport default PublicRoute","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { getToken } from '../service/AuthService';\n\nconst PrivateRoute = ({ component: Component, ...rest}) => {\n  return (\n    <Route \n      {...rest}\n      render={props => {\n        return getToken() ? <Component {...props} />\n        : <Redirect to={{ pathname: '/login'}} />\n      }}\n    />\n  )\n}\n\nexport default PrivateRoute","import { BrowserRouter, NavLink, Route, Switch} from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport PremiumContent from \"./PremiumContent\";\nimport PublicRoute from \"./routes/PublicRoute\";\nimport PrivateRoute from \"./routes/PrivateRoute\";\nimport React, { useState, useEffect } from \"react\";\nimport { getUser, getToken, setUserSession, resetUserSession } from \"./service/AuthService\";\nimport axios from \"axios\";\n\nconst verifyTokenAPIURL = 'https://lxfsrxntnf.execute-api.us-east-1.amazonaws.com/prod/verify';\n\nfunction App() {\n\n  const [isAuthenicating, setAuthenicating] = useState(true);\n\n  useEffect(() => {\n    const token = getToken();\n    if (token === 'undefined' || token === undefined || token === null || !token) {\n      return;\n    }\n\n    const requestConfig = {\n      headers: {\n        'x-api-key': 'mzW9uosG9F1ZZ3uXEo9Vn5Yxxc9tTTo08UwzVecx'\n      }\n    }\n    const requestBody = {\n      user: getUser(),\n      token: token\n    }\n\n    axios.post(verifyTokenAPIURL, requestBody, requestConfig).then(response => {\n      setUserSession(response.data.user, response.data.token);\n      setAuthenicating(false);\n    }).catch(() => {\n      resetUserSession();\n      setAuthenicating(false);\n    })\n  }, []);\n\n  const token = getToken();\n  if (isAuthenicating && token) {\n    return <div className=\"content\">Authenicating...</div>\n  }\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n      <div className=\"header\">\n        <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\n        <NavLink activeClassName=\"active\" to=\"/register\">Register</NavLink>\n        <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink>\n        <NavLink activeClassName=\"active\" to=\"/premium-content\">Premium Content</NavLink>\n      </div>\n      <div className=\"content\">\n        <Switch>\n          <Route exact path=\"/\" component={Home}/>\n          <PublicRoute path=\"/register\" component={Register}/>\n          <PublicRoute path=\"/login\" component={Login}/>\n          <PrivateRoute path=\"/premium-content\" component={PremiumContent}/>\n        </Switch>\n      </div>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}
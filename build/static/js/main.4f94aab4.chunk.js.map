{"version":3,"sources":["service/AuthService.js","Home.js","Register.js","Login.js","PremiumContent.js","routes/PublicRoute.js","routes/PrivateRoute.js","App.js","index.js"],"names":["module","exports","getUser","user","sessionStorage","getItem","JSON","parse","getToken","setUserSession","token","setItem","stringify","resetUserSession","removeItem","Home","Register","useState","name","setName","email","setEmail","username","setUsername","password","setPassword","message","setMessage","onSubmit","event","preventDefault","trim","requestBody","axios","post","headers","then","response","catch","error","status","data","type","value","onChange","target","className","Login","props","errorMessage","setErrorMessage","history","push","PremiumContent","onClick","PublicRoute","Component","component","rest","render","to","pathname","PrivateRoute","App","isAuthenicating","setAuthenicating","useEffect","undefined","exact","activeClassName","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"0GAAAA,EAAOC,QAAU,CACfC,QAAS,WACP,IAAMC,EAAOC,eAAeC,QAAQ,QACpC,MAAa,cAATF,GAAyBA,EAGpBG,KAAKC,MAAMJ,GAFX,IAIX,EAEAK,SAAU,WACR,OAAOJ,eAAeC,QAAQ,QAChC,EAEAI,eAAgB,SAASN,EAAMO,GAC7BN,eAAeO,QAAQ,OAAQL,KAAKM,UAAUT,IAC9CC,eAAeO,QAAQ,QAASD,EAClC,EAEAG,iBAAkB,WAChBT,eAAeU,WAAW,QAC1BV,eAAeU,WAAW,QAC5B,E,mHCZaC,EARF,WACX,OACE,wDAIJ,E,iBCkDeC,EArDE,WACf,MAAwBC,mBAAS,IAAG,mBAA7BC,EAAI,KAAEC,EAAO,KACpB,EAA0BF,mBAAS,IAAG,mBAA/BG,EAAK,KAAEC,EAAQ,KACtB,EAAgCJ,mBAAS,IAAG,mBAArCK,EAAQ,KAAEC,EAAW,KAC5B,EAAgCN,mBAAS,IAAG,mBAArCO,EAAQ,KAAEC,EAAW,KAC5B,EAA8BR,mBAAS,MAAK,mBAArCS,EAAO,KAAEC,EAAU,KAiC1B,OACE,gCACE,uBAAMC,SAjCY,SAACC,GAErB,GADAA,EAAMC,iBACkB,KAApBR,EAASS,QAAkC,KAAjBX,EAAMW,QAAiC,KAAhBb,EAAKa,QAAqC,KAApBP,EAASO,OAApF,CAIAJ,EAAW,MAEX,IAAMK,EAAc,CAClBV,SAAUA,EACVF,MAAOA,EACPF,KAAMA,EACNM,SAAUA,GAQZS,IAAMC,KA7BU,uEA6BQF,EALF,CACpBG,QAAS,CACP,YAAa,8CAGkCC,MAAK,SAAAC,GACtDV,EAAW,2BACb,IAAGW,OAAM,SAAAC,GACuB,MAA1BA,EAAMF,SAASG,OACjBb,EAAWY,EAAMF,SAASI,KAAKf,SAE/BC,EAAW,+DAEf,GAvBA,MAFEA,EAAW,0BA0Bf,EAIkC,UAC5B,0CAAiB,SACX,uBAAOe,KAAK,OAAOC,MAAOzB,EAAM0B,SAAU,SAAAf,GAAK,OAAIV,EAAQU,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBAAK,UACvF,uBAAOD,KAAK,OAAOC,MAAOvB,EAAOwB,SAAU,SAAAf,GAAK,OAAIR,EAASQ,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBAAK,aACvF,uBAAOD,KAAK,OAAOC,MAAOrB,EAAUsB,SAAU,SAAAf,GAAK,OAAIN,EAAYM,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBAAK,aAChG,uBAAOD,KAAK,OAAOC,MAAOnB,EAAUoB,SAAU,SAAAf,GAAK,OAAIJ,EAAYI,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBACrG,uBAAOD,KAAK,SAASC,MAAM,gBAE5BjB,GAAW,mBAAGoB,UAAU,UAAS,SAAEpB,MAG1C,E,OCFeqB,EAjDD,SAACC,GACb,MAAgC/B,mBAAS,IAAG,mBAArCK,EAAQ,KAAEC,EAAW,KAC5B,EAAgCN,mBAAS,IAAG,mBAArCO,EAAQ,KAAEC,EAAW,KAC5B,EAAwCR,mBAAS,MAAK,mBAA/CgC,EAAY,KAAEC,EAAe,KAiCpC,OACE,gCACE,uBAAMtB,SAjCY,SAACC,GAErB,GADAA,EAAMC,iBACkB,KAApBR,EAASS,QAAqC,KAApBP,EAASO,OAAvC,CAIAmB,EAAgB,MAEhB,IAAMlB,EAAc,CAClBV,SAAUA,EACVE,SAAUA,GASZS,IAAMC,KA1BU,oEA0BQF,EANF,CACpBG,QAAS,CACP,YAAa,8CAImCC,MAAK,SAACC,GACxD5B,yBAAe4B,EAASI,KAAKtC,KAAMkC,EAASI,KAAK/B,OACjDsC,EAAMG,QAAQC,KAAK,mBACrB,IAAGd,OAAM,SAACC,GACsB,MAA1BA,EAAMF,SAASG,QAA4C,MAA1BD,EAAMF,SAASG,OAClDU,EAAgBX,EAAMF,SAASI,KAAKf,SAEpCwB,EAAgB,gEAEpB,GAvBA,MAFEA,EAAgB,0CA0BpB,EAIkC,UAC5B,uCAAc,aACJ,uBAAOR,KAAK,OAAOC,MAAOrB,EAAUsB,SAAU,SAAAf,GAAK,OAAIN,EAAYM,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBAAK,aAChG,uBAAOD,KAAK,WAAWC,MAAOnB,EAAUoB,SAAU,SAAAf,GAAK,OAAIJ,EAAYI,EAAMgB,OAAOF,MAAM,IAAI,IAAC,uBACzG,uBAAOD,KAAK,SAASC,MAAM,aAE5BM,GAAgB,mBAAGH,UAAU,UAAS,SAAEG,MAG/C,ECjCeI,EAhBQ,SAACL,GACtB,IAAM7C,EAAOD,oBACPgB,EAAgB,cAATf,GAAwBA,EAAOA,EAAKe,KAAO,GAMxD,OACE,yCACSA,EAAI,mEAAiE,uBAC5E,uBAAOwB,KAAK,SAASC,MAAM,SAASW,QAPlB,WACpBzC,6BACAmC,EAAMG,QAAQC,KAAK,QACrB,MAOF,E,gCCDeG,EAZK,SAAH,GAA0C,IAAzBC,EAAS,EAApBC,UAAyBC,EAAI,iBAClD,OACE,cAAC,IAAK,2BACAA,GAAI,IACRC,OAAQ,SAAAX,GACN,OAAQxC,qBACN,cAAC,IAAQ,CAACoD,GAAI,CAAEC,SAAU,sBADP,cAACL,EAAS,eAAKR,GAEtC,IAGN,E,gBCEec,EAZM,SAAH,GAA0C,IAAzBN,EAAS,EAApBC,UAAyBC,EAAI,iBACnD,OACE,cAAC,IAAK,2BACAA,GAAI,IACRC,OAAQ,SAAAX,GACN,OAAOxC,qBAAa,cAACgD,EAAS,eAAKR,IACjC,cAAC,IAAQ,CAACY,GAAI,CAAEC,SAAU,WAC9B,IAGN,ECuDeE,MAxDf,WAEE,MAA4C9C,oBAAS,GAAK,mBAAnD+C,EAAe,KAAEC,EAAgB,KAExCC,qBAAU,WACR,IAAMxD,EAAQF,qBACd,GAAc,cAAVE,QAAmCyD,IAAVzD,GAAiC,OAAVA,GAAmBA,EAAvE,CAIA,IAKMsB,EAAc,CAClB7B,KAAMD,oBACNQ,MAAOA,GAGTuB,IAAMC,KAtBgB,qEAsBQF,EAVR,CACpBG,QAAS,CACP,YAAa,8CAQyCC,MAAK,SAAAC,GAC7D5B,yBAAe4B,EAASI,KAAKtC,KAAMkC,EAASI,KAAK/B,OACjDuD,GAAiB,EACnB,IAAG3B,OAAM,WACPzB,6BACAoD,GAAiB,EACnB,GAlBA,CAmBF,GAAG,IAEH,IAAMvD,EAAQF,qBACd,OAAIwD,GAAmBtD,EACd,qBAAKoC,UAAU,UAAS,8BAI/B,qBAAKA,UAAU,MAAK,SAClB,eAAC,IAAa,WACd,sBAAKA,UAAU,SAAQ,UACrB,cAAC,IAAO,CAACsB,OAAK,EAACC,gBAAgB,SAAST,GAAG,IAAG,kBAC9C,cAAC,IAAO,CAACS,gBAAgB,SAAST,GAAG,YAAW,sBAChD,cAAC,IAAO,CAACS,gBAAgB,SAAST,GAAG,SAAQ,mBAC7C,cAAC,IAAO,CAACS,gBAAgB,SAAST,GAAG,mBAAkB,gCAEzD,qBAAKd,UAAU,UAAS,SACtB,eAAC,IAAM,WACL,cAAC,IAAK,CAACsB,OAAK,EAACE,KAAK,IAAIb,UAAW1C,IACjC,cAAC,EAAW,CAACuD,KAAK,YAAYb,UAAWzC,IACzC,cAAC,EAAW,CAACsD,KAAK,SAASb,UAAWV,IACtC,cAAC,EAAY,CAACuB,KAAK,mBAAmBb,UAAWJ,aAM3D,EC9DAkB,IAASZ,OACP,cAAC,IAAMa,WAAU,UACf,cAAC,EAAG,MAENC,SAASC,eAAe,Q","file":"static/js/main.4f94aab4.chunk.js","sourcesContent":["module.exports = {\r\n  getUser: function() {\r\n    const user = sessionStorage.getItem('user');\r\n    if (user === 'undefined' || !user) {\r\n      return null;\r\n    } else {\r\n      return JSON.parse(user);\r\n    }\r\n  },\r\n\r\n  getToken: function() {\r\n    return sessionStorage.getItem('token');\r\n  },\r\n\r\n  setUserSession: function(user, token) {\r\n    sessionStorage.setItem('user', JSON.stringify(user));\r\n    sessionStorage.setItem('token', token);\r\n  },\r\n\r\n  resetUserSession: function() {\r\n    sessionStorage.removeItem('user');\r\n    sessionStorage.removeItem('token');\r\n  }\r\n}","import React from 'react';\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div>\r\n      This is the home page!\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst registerUrl = 'https://3y1aczstgg.execute-api.us-east-1.amazonaws.com/prod/register';\r\n\r\nconst Register = () => {\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    if (username.trim() === '' || email.trim() === '' || name.trim() === '' || password.trim() === '') {\r\n      setMessage('All fields are required');\r\n      return;\r\n    }\r\n    setMessage(null);\r\n    \r\n    const requestBody = {\r\n      username: username,\r\n      email: email,\r\n      name: name,\r\n      password: password\r\n    }\r\n\r\n    const requestConfig = {\r\n      headers: {\r\n        'x-api-key': 'iyO28j4UFf1oqazrpQAJF7iw9QQnrN4U1V4xXPUO'\r\n      }\r\n    }\r\n    axios.post(registerUrl, requestBody,requestConfig).then(response => {\r\n      setMessage('Registeration Successful');\r\n    }).catch(error => {\r\n      if (error.response.status === 401) {\r\n        setMessage(error.response.data.message);\r\n      } else {\r\n        setMessage('sorry....the backend server is down!! please try again later');\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={submitHandler}>\r\n        <h5>Register</h5>\r\n        name: <input type=\"text\" value={name} onChange={event => setName(event.target.value)} /> <br/>\r\n        email: <input type=\"text\" value={email} onChange={event => setEmail(event.target.value)} /> <br/>\r\n        username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br/>\r\n        password: <input type=\"text\" value={password} onChange={event => setPassword(event.target.value)} /> <br/>\r\n        <input type=\"submit\" value=\"Register\" />\r\n      </form>\r\n      {message && <p className=\"message\">{message}</p>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register;","import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession } from './service/AuthService'\r\nconst loginAPIUrl = 'https://3y1aczstgg.execute-api.us-east-1.amazonaws.com/prod/login';\r\n\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    if (username.trim() === '' || password.trim() === '') {\r\n      setErrorMessage('Both username and password are required');\r\n      return;\r\n    }\r\n    setErrorMessage(null);\r\n   \r\n    const requestBody = {\r\n      username: username,\r\n      password: password\r\n    }\r\n\r\n    const requestConfig = {\r\n      headers: {\r\n        'x-api-key': 'iyO28j4UFf1oqazrpQAJF7iw9QQnrN4U1V4xXPUO'\r\n      }\r\n    }\r\n\r\n    axios.post(loginAPIUrl, requestBody, requestConfig).then((response) => {\r\n      setUserSession(response.data.user, response.data.token);\r\n      props.history.push('/premium-content');\r\n    }).catch((error) => {\r\n      if (error.response.status === 401 || error.response.status === 403) {\r\n        setErrorMessage(error.response.data.message);\r\n      } else {\r\n        setErrorMessage('sorry....the backend server is down. please try again later!!');\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={submitHandler}>\r\n        <h5>Login</h5>\r\n        username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br/>\r\n        password: <input type=\"password\" value={password} onChange={event => setPassword(event.target.value)} /> <br/>\r\n        <input type=\"submit\" value=\"Login\" />\r\n      </form>\r\n      {errorMessage && <p className=\"message\">{errorMessage}</p>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { getUser, resetUserSession } from './service/AuthService';\r\n\r\nconst PremiumContent = (props) => {\r\n  const user = getUser();\r\n  const name = user !== 'undefined' && user ? user.name : '';\r\n\r\n  const logoutHandler = () => {\r\n    resetUserSession();\r\n    props.history.push('login');\r\n  }\r\n  return (\r\n    <div>\r\n      Hello {name}! You have been loggined in!!!! Welcome to the premium content. <br />\r\n      <input type=\"button\" value=\"Logout\" onClick={logoutHandler} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PremiumContent;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { getToken } from '../service/AuthService';\r\n\r\nconst PublicRoute = ({ component: Component, ...rest}) => {\r\n  return (\r\n    <Route \r\n      {...rest}\r\n      render={props => {\r\n        return !getToken() ? <Component {...props} />\r\n        : <Redirect to={{ pathname: '/premium-content'}} />\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nexport default PublicRoute","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { getToken } from '../service/AuthService';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest}) => {\r\n  return (\r\n    <Route \r\n      {...rest}\r\n      render={props => {\r\n        return getToken() ? <Component {...props} />\r\n        : <Redirect to={{ pathname: '/login'}} />\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nexport default PrivateRoute","import { BrowserRouter, NavLink, Route, Switch} from \"react-router-dom\";\r\nimport Home from \"./Home\";\r\nimport Register from \"./Register\";\r\nimport Login from \"./Login\";\r\nimport PremiumContent from \"./PremiumContent\";\r\nimport PublicRoute from \"./routes/PublicRoute\";\r\nimport PrivateRoute from \"./routes/PrivateRoute\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { getUser, getToken, setUserSession, resetUserSession } from \"./service/AuthService\";\r\nimport axios from \"axios\";\r\n\r\nconst verifyTokenAPIURL = 'https://3y1aczstgg.execute-api.us-east-1.amazonaws.com/prod/verify';\r\n\r\nfunction App() {\r\n\r\n  const [isAuthenicating, setAuthenicating] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (token === 'undefined' || token === undefined || token === null || !token) {\r\n      return;\r\n    }\r\n\r\n    const requestConfig = {\r\n      headers: {\r\n        'x-api-key': 'iyO28j4UFf1oqazrpQAJF7iw9QQnrN4U1V4xXPUO'\r\n      }\r\n    }\r\n    const requestBody = {\r\n      user: getUser(),\r\n      token: token\r\n    }\r\n\r\n    axios.post(verifyTokenAPIURL, requestBody, requestConfig).then(response => {\r\n      setUserSession(response.data.user, response.data.token);\r\n      setAuthenicating(false);\r\n    }).catch(() => {\r\n      resetUserSession();\r\n      setAuthenicating(false);\r\n    })\r\n  }, []);\r\n\r\n  const token = getToken();\r\n  if (isAuthenicating && token) {\r\n    return <div className=\"content\">Authenicating...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n      <div className=\"header\">\r\n        <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/register\">Register</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/premium-content\">Premium Content</NavLink>\r\n      </div>\r\n      <div className=\"content\">\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home}/>\r\n          <PublicRoute path=\"/register\" component={Register}/>\r\n          <PublicRoute path=\"/login\" component={Login}/>\r\n          <PrivateRoute path=\"/premium-content\" component={PremiumContent}/>\r\n        </Switch>\r\n      </div>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}
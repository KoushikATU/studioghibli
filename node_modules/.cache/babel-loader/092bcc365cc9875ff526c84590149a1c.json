{"ast":null,"code":"import _slicedToArray from\"D:/Studio Ghibil/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{setUserSession}from'./service/AuthService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginAPIUrl='https://lxfsrxntnf.execute-api.us-east-1.amazonaws.com/prod/login';var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var submitHandler=function submitHandler(event){event.preventDefault();if(username.trim()===''||password.trim()===''){setErrorMessage('Both username and password are required');return;}setErrorMessage(null);var requestBody={username:username,password:password};var requestConfig={headers:{'x-api-key':'mzW9uosG9F1ZZ3uXEo9Vn5Yxxc9tTTo08UwzVecx'}};axios.post(loginAPIUrl,requestBody,requestConfig).then(function(response){setUserSession(response.data.user,response.data.token);props.history.push('/premium-content');}).catch(function(error){if(error.response.status===401||error.response.status===403){setErrorMessage(error.response.data.message);}else{setErrorMessage('sorry....the backend server is down. please try again later!!');}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Login\"}),\"username: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"password: \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:errorMessage})]});};export default Login;","map":{"version":3,"names":["React","useState","axios","setUserSession","loginAPIUrl","Login","props","username","setUsername","password","setPassword","errorMessage","setErrorMessage","submitHandler","event","preventDefault","trim","requestBody","requestConfig","headers","post","then","response","data","user","token","history","push","catch","error","status","message","target","value"],"sources":["D:/Studio Ghibil/src/Login.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession } from './service/AuthService'\r\nconst loginAPIUrl = 'https://lxfsrxntnf.execute-api.us-east-1.amazonaws.com/prod/login';\r\n\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    if (username.trim() === '' || password.trim() === '') {\r\n      setErrorMessage('Both username and password are required');\r\n      return;\r\n    }\r\n    setErrorMessage(null);\r\n   \r\n    const requestBody = {\r\n      username: username,\r\n      password: password\r\n    }\r\n\r\n    const requestConfig = {\r\n      headers: {\r\n        'x-api-key': 'mzW9uosG9F1ZZ3uXEo9Vn5Yxxc9tTTo08UwzVecx'\r\n      }\r\n    }\r\n\r\n    axios.post(loginAPIUrl, requestBody, requestConfig).then((response) => {\r\n      setUserSession(response.data.user, response.data.token);\r\n      props.history.push('/premium-content');\r\n    }).catch((error) => {\r\n      if (error.response.status === 401 || error.response.status === 403) {\r\n        setErrorMessage(error.response.data.message);\r\n      } else {\r\n        setErrorMessage('sorry....the backend server is down. please try again later!!');\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={submitHandler}>\r\n        <h5>Login</h5>\r\n        username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br/>\r\n        password: <input type=\"password\" value={password} onChange={event => setPassword(event.target.value)} /> <br/>\r\n        <input type=\"submit\" value=\"Login\" />\r\n      </form>\r\n      {errorMessage && <p className=\"message\">{errorMessage}</p>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;"],"mappings":"sGAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,uBAAuB,yFACtD,GAAMC,YAAW,CAAG,mEAAmE,CAEvF,GAAMC,MAAK,CAAG,QAARA,MAAK,CAAIC,KAAK,CAAK,CACvB,cAAgCL,QAAQ,CAAC,EAAE,CAAC,wCAArCM,QAAQ,eAAEC,WAAW,eAC5B,eAAgCP,QAAQ,CAAC,EAAE,CAAC,yCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,eAAwCT,QAAQ,CAAC,IAAI,CAAC,yCAA/CU,YAAY,eAAEC,eAAe,eAEpC,GAAMC,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAAK,CAAK,CAC/BA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAIR,QAAQ,CAACS,IAAI,EAAE,GAAK,EAAE,EAAIP,QAAQ,CAACO,IAAI,EAAE,GAAK,EAAE,CAAE,CACpDJ,eAAe,CAAC,yCAAyC,CAAC,CAC1D,OACF,CACAA,eAAe,CAAC,IAAI,CAAC,CAErB,GAAMK,YAAW,CAAG,CAClBV,QAAQ,CAAEA,QAAQ,CAClBE,QAAQ,CAAEA,QACZ,CAAC,CAED,GAAMS,cAAa,CAAG,CACpBC,OAAO,CAAE,CACP,WAAW,CAAE,0CACf,CACF,CAAC,CAEDjB,KAAK,CAACkB,IAAI,CAAChB,WAAW,CAAEa,WAAW,CAAEC,aAAa,CAAC,CAACG,IAAI,CAAC,SAACC,QAAQ,CAAK,CACrEnB,cAAc,CAACmB,QAAQ,CAACC,IAAI,CAACC,IAAI,CAAEF,QAAQ,CAACC,IAAI,CAACE,KAAK,CAAC,CACvDnB,KAAK,CAACoB,OAAO,CAACC,IAAI,CAAC,kBAAkB,CAAC,CACxC,CAAC,CAAC,CAACC,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,GAAIA,KAAK,CAACP,QAAQ,CAACQ,MAAM,GAAK,GAAG,EAAID,KAAK,CAACP,QAAQ,CAACQ,MAAM,GAAK,GAAG,CAAE,CAClElB,eAAe,CAACiB,KAAK,CAACP,QAAQ,CAACC,IAAI,CAACQ,OAAO,CAAC,CAC9C,CAAC,IAAM,CACLnB,eAAe,CAAC,+DAA+D,CAAC,CAClF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACE,oCACE,cAAM,QAAQ,CAAEC,aAAc,wBAC5B,6BAAc,2BACJ,cAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEN,QAAS,CAAC,QAAQ,CAAE,kBAAAO,KAAK,QAAIN,YAAW,CAACM,KAAK,CAACkB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAG,kBAAC,aAAK,2BAChG,cAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAExB,QAAS,CAAC,QAAQ,CAAE,kBAAAK,KAAK,QAAIJ,YAAW,CAACI,KAAK,CAACkB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAG,kBAAC,aAAK,cAC9G,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAG,GAChC,CACNtB,YAAY,eAAI,UAAG,SAAS,CAAC,SAAS,UAAEA,YAAY,EAAK,GACtD,CAEV,CAAC,CAED,cAAeN,MAAK"},"metadata":{},"sourceType":"module"}